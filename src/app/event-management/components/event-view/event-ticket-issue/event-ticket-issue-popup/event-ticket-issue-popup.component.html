<div class="event-dialog-wrapper">
    <mat-toolbar matDialogTitle class="mat-primary pr0 flex flex-wrap">
        <span class="mat-headline-4">{{ data.title }}</span>
        <button
                mat-icon
                (click)="dialogRef.close()"
                class="float-right"
                aria-label="Close dialog"
        >
            <mat-icon>close</mat-icon>
        </button>
    </mat-toolbar>
    <div mat-dialog-content class="padround18">
        <form
                [formGroup]="issueTicketForm"
                class="issueTicketForm flex flex-col padround18"
                (ngSubmit)="submit(issueTicketForm.value)"
        >
            <div soraxdir-alert-message [errorMessage]="messages | json"></div>

            <div class="flex flex-wrap flex-col md:flex-row">

                <div class="w-full md:w-1/1 pr-8">
                    <mat-form-field class="full-width">
                        <mat-select placeholder="Ticket" [formControl]="issueTicketForm.controls['ticketId']">
                            <mat-option *ngFor="let t of availableTicketOptions" [value]="t.id">
                                {{ t.name }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="w-full md:w-1/1 pr-8">
                    <sorax-form-field label="Person Name" [soraxFormControl]="issueTicketForm.get('name')">
                        <input #soraxInput matInput formControlName="name" type="text" name="name"
                               placeholder="Person Name"/>
                    </sorax-form-field>
                </div>
            </div>

            <div class="flex flex-wrap flex-col md:flex-row">
                <div class="w-full md:w-1/1 pr-8">
                    <sorax-form-field label="Email" [soraxFormControl]="issueTicketForm.get('emailId')">
                        <input #soraxInput matInput formControlName="emailId" type="text" name="name"
                               placeholder="Email"/>
                    </sorax-form-field>
                </div>
            </div>

            <div class="flex flex-wrap flex-col md:flex-row">
                <div class="w-full md:w-1/1 pr-8">
                    <sorax-form-field label="Phone number" [soraxFormControl]="issueTicketForm.get('phoneNumber')">
                        <input #soraxInput matInput formControlName="phoneNumber" type="text" name="name"
                               placeholder="Phone number"/>
                    </sorax-form-field>
                </div>
            </div>


            <div class="flex flex-wrap flex-col md:flex-row">

                <div class="w-full md:w-1/2 pr-8">
                    <sorax-form-field class="w-full md:w-1/2" label="#Tickets"
                                      [soraxFormControl]="issueTicketForm.get('ticketPurchased')">
                        <input #soraxInput matInput formControlName="ticketPurchased" type="number"
                               name="ticketPurchased" placeholder="#Tickets"/>
                    </sorax-form-field>
                </div>

                <div class="w-full md:w-1/2 pr-8">
                    <sorax-form-field class="w-full md:w-1/2" label="Select Coupon"
                                      [soraxFormControl]="issueTicketForm.get('couponId')">
                        <input #soraxInput matInput formControlName="couponId" type="number"
                               name="couponId" placeholder="Select Coupon"/>
                    </sorax-form-field>
                </div>
            </div>
            <div class="flex flex-wrap flex-col md:flex-row">
                <div class="w-full md:w-1/2 pr-8">
                    <mat-checkbox aria-label="Send Tickets through Email" formControlName="emailTicket">
                        Send Tickets through Email
                    </mat-checkbox>
                </div>

                <div class="w-full md:w-1/2 pr-8">
                    <mat-checkbox aria-label="Send Tickets through SMS" formControlName="smsTicket">
                        Send Tickets through SMS
                    </mat-checkbox>
                </div>
            </div>

        </form>
    </div>

    <div mat-dialog-actions class="m-0 p-16 text-center flex">
        <button
                mat-raised-button
                class="mat-primary text-left"
                aria-label="Close"
                (click)="dialogRef.close()"
        >
            Close
        </button>
        <span class="flex-grow"></span>
        <button
                mat-raised-button
                class="mat-primary text-right"
                aria-label="Create a ticket"
                [textContent]="buttonText"
                (click)="submit(issueTicketForm.value)"
        >
            {{buttonText}}
        </button>
    </div>
</div>
