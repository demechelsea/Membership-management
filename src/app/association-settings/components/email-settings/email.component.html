<mat-tab-group (selectedTabChange)="onTabChanged($event)">
  <mat-tab label="Settings">
    <mat-card class="custom-bg p-4">
      <mat-card-header
        class="flex justify-between items-center pb-2 text-white"
      >
        <mat-card-title>SMTP Email Settings</mat-card-title>
        <button mat-icon-button (click)="openSMTPPopUp({})" class="text-white">
          <mat-icon>edit</mat-icon>
        </button>
      </mat-card-header>

      <mat-card-content class="content w-full pt-4">
        <div class="flex flex-wrap flex-col md:flex-row">
          <mat-form-field class="w-full md:w-1/3 pr-8 mb-4">
            <mat-label class="text-gray-600">SMTP Email host</mat-label>
            <input matInput disabled class="p-2" />
          </mat-form-field>
          <mat-form-field class="w-full md:w-1/3 pr-8 mb-4">
            <mat-label class="text-gray-600">PORT</mat-label>
            <input matInput disabled class="p-2" />
          </mat-form-field>
          <mat-form-field class="w-full md:w-1/3 pr-8 mb-4">
            <mat-label class="text-gray-600">myemail@mydomain.com</mat-label>
            <input matInput disabled class="p-2" />
          </mat-form-field>
        </div>
        <div class="flex flex-wrap flex-col md:flex-row">
          <mat-form-field class="w-full md:w-1/2 pr-8 mb-4">
            <mat-label class="text-gray-600"
              >Password will be encrypted</mat-label
            >
            <input type="password" matInput disabled class="p-2" />
          </mat-form-field>
          <mat-form-field class="w-full md:w-1/2 pr-8 mb-4">
            <mat-label class="text-gray-600">Reply to Email address</mat-label>
            <input matInput disabled class="p-2" />
          </mat-form-field>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="custom-bg p-4">
      <mat-card-header
        class="flex justify-between items-center pb-2 text-white"
      >
        <mat-card-title>Senders Profile</mat-card-title>
        <button mat-icon-button (click)="openSendersProfilePopUp({})">
          <mat-icon>edit</mat-icon>
        </button>
      </mat-card-header>
      <mat-card-content class="content pt-4 content">
        <div class="flex flex-col md:flex-row">
          <div class="w-full md:w-1/2 md:pr-2 mb-4">
            <mat-form-field class="w-full mb-2">
              <mat-label class="text-gray-600">Sender name</mat-label>
              <input matInput disabled class="p-2" />
            </mat-form-field>
            <mat-form-field class="w-full">
              <mat-label class="text-gray-600"
                >Reply to Email: replay@mydomain.com</mat-label
              >
              <input matInput disabled class="p-2" />
            </mat-form-field>
          </div>
          <div
            class="w-full md:w-1/2 md:pl-2 mb-4 flex flex-col justify-between"
          >
            <mat-form-field class="w-full">
              <mat-label class="text-gray-600">Email Signiture</mat-label>
              <textarea
                matInput
                disabled
                rows="5"
                class="p-2"
                style="resize: none"
              ></textarea>
            </mat-form-field>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </mat-tab>
  <mat-tab label="System Templates">
    <sorax-table-view
      [tableData]="emailTemplateData"
      [tableColumns]="emailTemplateColumns"
      [isFilterable]="false"
      [isPageable]="true"
      [page]="page"
      (rowAction)="executeSystemTemplatesRowActions($event)"
      [tableType]="'EmailTemplate'"
    >
    </sorax-table-view>
  </mat-tab>
  <mat-tab label="Unsubscribed Lists">
    <div
      [@animate]="{ value: '*', params: { y: '60px', delay: '300ms' } }"
      class="flex justify-between"
    >
      <div class="flex justify-start m-8">
        <sorax-form-field
          [label]="'Filter By'"
          [soraxFormControl]="filterControl"
        >
          <input #soraxInput matInput [(ngModel)]="filterText" />
        </sorax-form-field>
        <button
          mat-raised-button
          color="primary"
          (click)="applyUnsubscribedFilter()"
        >
          Filter List
        </button>
      </div>
      <div class="m-8">
        <form [formGroup]="emailUnsubscribeListForm" (ngSubmit)="submit()">
          <div class="flex">
            <sorax-form-field
              label="Email Address"
              [soraxFormControl]="emailUnsubscribeListForm.get('emailId')"
            >
              <input
                #soraxInput
                matInput
                formControlName="emailId"
                type="email"
                name="emailId"
                placeholder="Enter email address"
              />
            </sorax-form-field>
            <button mat-raised-button color="primary" type="submit">
              Add to Unsubscribed List
            </button>
          </div>
        </form>
      </div>
    </div>

    <sorax-table-view
      [serverSidePagination]="true"
      [tableData]="emailUnsubscribedListstData"
      [tableColumns]="emailUnsubscribedListsColumn"
      [isFilterable]="false"
      [isPageable]="true"
      [page]="page"
      (pageEvent)="emailUnsubscriptionPageChangeEvent($event)"
      (sortEvent)="emailUnsubscriptionSortData($event)"
      (rowAction)="executeEmailUnsubscriptionRowActions($event)"
      [tableType]="'emailUnsubscription'"
    >
    </sorax-table-view>
  </mat-tab>
  <mat-tab label="History">
    <div class="flex justify-start m-8">
      <sorax-form-field
        [label]="'Filter By'"
        [soraxFormControl]="filterControl"
      >
        <input #soraxInput matInput [(ngModel)]="filterText" />
      </sorax-form-field>
      <button mat-raised-button color="primary" (click)="applyHistoryFilter()">
        Filter List
      </button>
    </div>

    <sorax-table-view
      [serverSidePagination]="true"
      [tableData]="emailHistoryData"
      [tableColumns]="emailHistoryColumn"
      [isFilterable]="false"
      [isPageable]="true"
      [page]="page"
      (rowAction)="executeEmailHistoryRowActions($event)"
      (pageEvent)="emailHistoryPageChangeEvent($event)"
      (sortEvent)="emailHistorySortData($event)"
    >
    </sorax-table-view>

    <mat-card class="mx-auto custom-sm" *ngIf="emailContent">
      <mat-card-content class="flex flex-col">
        <form [formGroup]="emailHistoryForm">
          <div class="flex justify-between">
            <mat-form-field class="w-1/3 p-2">
              <mat-label>From</mat-label>
              <input matInput disabled />
            </mat-form-field>
            <sorax-form-field
              class="w-1/3 p-2"
              label="Sent to"
              [soraxFormControl]="emailHistoryForm.get('recipients')"
            >
              <input
                #soraxInput
                matInput
                formControlName="recipients"
                name="recipients"
              />
            </sorax-form-field>
            <sorax-form-field
              class="w-1/3 p-2"
              label="Sent Date"
              [soraxFormControl]="emailHistoryForm.get('modifiedTimestamp')"
            >
              <input
                #soraxInput
                matInput
                formControlName="modifiedTimestamp"
                name="modifiedTimestamp"
              />
            </sorax-form-field>
          </div>
          <div class="w-2/3 p-2">
            <sorax-form-field
              label="Email subject"
              [soraxFormControl]="emailHistoryForm.get('emailSubject')"
            >
              <input
                #soraxInput
                matInput
                formControlName="emailSubject"
                name="emailSubject"
              />
            </sorax-form-field>
          </div>
          <div class="w-2/3 p-2 h-24">
            <sorax-form-field
              label="Email body"
              [soraxFormControl]="emailHistoryForm.get('emailContent')"
            >
              <input
                #soraxInput
                matInput
                formControlName="emailContent"
                name="emailContent"
              />
            </sorax-form-field>
          </div>
        </form>
        <div class="flex justify-end">
          <button mat-raised-button color="primary" (click)="close()">
            Close
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </mat-tab>
</mat-tab-group>
